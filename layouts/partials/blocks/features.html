{{/* Hugo Blox: Features Block Override - Maximize Icons & Circle */}}
{{ $block := .wcBlock }}
{{ $page := .wcPage }}

<div class="flex flex-col items-center max-w-prose mx-auto gap-3 justify-center px-6 md:px-0">
  
  {{/* Τίτλος Ενότητας */}}
  <div class="mb-6 text-3xl font-bold text-gray-900 dark:text-white text-center" style="text-transform: none !important;">
    {{ $block.content.title | markdownify | emojify }}
  </div>

  {{/* Υπότιτλος */}}
  {{ with $block.content.text }}
  <p class="text-center text-gray-700 dark:text-gray-300 mb-8" style="text-transform: none !important;">
    {{ . | markdownify | emojify }}
  </p>
  {{ end }}
  
</div>

<div class="mx-auto max-w-7xl px-6 lg:px-8">
  <div class="mx-auto mt-8 max-w-2xl sm:mt-10 lg:mt-12 lg:max-w-none">
    <dl class="grid max-w-xl grid-cols-1 gap-x-8 gap-y-16 lg:max-w-none lg:grid-cols-3">
      
      {{ range $block.content.items }}
      {{ $pack := .icon_pack | default "fas" }}
      {{ $icon := .icon }}
      
      <div class="flex flex-col items-center text-center">
        
        {{/* ΚΥΚΛΟΣ: h-32 w-32 (Μεγαλύτερος), p-0 (Καθόλου padding), overflow-hidden */}}
        <div class="mb-6 flex h-32 w-32 items-center justify-center rounded-full bg-indigo-50 dark:bg-indigo-900 p-0 overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300"> 
          
          {{ if $icon }}
            {{ if eq $pack "custom" }}
              {{/* Custom SVG - 100% Width/Height */}}
              <span class="inline-flex items-center justify-center" style="width:100%; height:100%;">
                {{- $iconPath := printf "media/icons/custom/%s.svg" $icon -}}
                {{- $iconRes := resources.Get $iconPath -}}
                {{- with $iconRes -}}
                  {{/* Force SVG to fill container */}}
                  {{ .Content | replaceRE "<svg" "<svg width=\"100%\" height=\"100%\" preserveAspectRatio=\"xMidYMid meet\"" | safeHTML }}
                {{- else -}}
                  <span title="{{ $icon }}" class="text-2xl">?</span>
                {{- end -}}
              </span>
            {{ else }}
              {{/* Standard Icons */}}
              <div style="font-size: 4rem;">
                {{ partial "functions/get_icon" (dict "name" $icon "pack" $pack) }}
              </div>
            {{ end }}
          {{ end }}
        </div>
        
        <dt class="text-xl font-semibold leading-7 text-gray-900 dark:text-white" style="text-transform: none !important;">
          {{ .name | markdownify | emojify }}
        </dt>
        
        {{ with .description }}
        <dd class="mt-1 flex flex-auto flex-col text-base leading-7 text-gray-600 dark:text-gray-400">
          <p class="flex-auto">{{ . | markdownify | emojify }}</p>
        </dd>
        {{ end }}
      </div>
      {{ end }}
      
    </dl>
  </div>
</div>
